# -*- coding: UTF-8 -*-


branches_list = ["47 45 54 20 2f 6c 6f 67 69 6e 2e 70 68 70 20 48 54 54 50 2f 31 2e 31 0d 0a 48 6f 73 74 3a 20 46 4c 43 50 77 69 43 42 70 0d 0a 55 73 65 72 2d 41 67 65 6e 74 3a 20 4d 6f 7a 69 6c 6c 61 2f 35 2e 30 20 28 4d 61 63 69 6e 74 6f 73 68 3b 20 55 3b 20 50 50 43 20 4d 61 63 20 4f 53 20 58 3b 20 65 6e 29 20 41 70 70 6c 65 57 65 62 4b 69 74 2f 34 31 36 2e 31 32 20 28 4b 48 54 4d 4c 2c 20 6c 69 6b 65 20 47 65 63 6b 6f 29 20 53 61 66 61 72 69 2f 34 31 36 2e 31 33 0d 0a 41 63 63 65 70 74 3a 20 2a 2f 2a 0d 0a 43 6f 6f 6b 69 65 3a 20 75 73 65 72 6e 61 6d 65 3d 61 64 6d 69 6e 3b 20 61 75 74 68 65 6e 74 69 63 61 74 65 64 3d 31 3b 20 75 73 65 72 74 79 70 65 3d 61 64 6d 69 6e 3b 0d 0a 43 6f 6e 6e 65 63 74 69 6f 6e 3a 20 6b 65 65 70 2d 61 6c 69 76 65 0d 0a 43 6f 6e 74 65 6e 74 2d 4c 65 6e 67 74 68 3a 20 30 0d 0a 0d 0a",
                 "47 45 54 20 2f 6c 6f 67 69 6e 2e 70 68 70 20 48 54 54 50 2f 31 2e 31 0d 0a 48 6f 73 74 3a 20 69 65 5a 79 65 46 79 77 57 50 73 57 72 76 67 6c 67 62 57 7a 67 75 0d 0a 55 73 65 72 2d 41 67 65 6e 74 3a 20 47 6f 6f 67 6c 65 62 6f 74 2d 49 6d 61 67 65 2f 31 2e 30 20 28 20 68 74 74 70 3a 2f 2f 77 77 77 2e 67 6f 6f 67 6c 65 62 6f 74 2e 63 6f 6d 2f 62 6f 74 2e 68 74 6d 6c 29 0d 0a 41 63 63 65 70 74 3a 20 2a 2f 2a 0d 0a 43 6f 6f 6b 69 65 3a 20 75 73 65 72 6e 61 6d 65 3d 61 64 6d 69 6e 3b 20 61 75 74 68 65 6e 74 69 63 61 74 65 64 3d 31 3b 20 75 73 65 72 74 79 70 65 3d 61 64 6d 69 6e 3b 0d 0a 43 6f 6e 6e 65 63 74 69 6f 6e 3a 20 6b 65 65 70 2d 61 6c 69 76 65 0d 0a 43 6f 6e 74 65 6e 74 2d 4c 65 6e 67 74 68 3a 20 30 0d 0a 0d 0a47 45 54 20 2f 6c 6f 67 69 6e 2e 70 68 70 20 48 54 54 50 2f 31 2e 31 0d 0a 48 6f 73 74 3a 20 69 65 5a 79 65 46 79 77 57 50 73 57 72 76 67 6c 67 62 57 7a 67 75 0d 0a 55 73 65 72 2d 41 67 65 6e 74 3a 20 47 6f 6f 67 6c 65 62 6f 74 2d 49 6d 61 67 65 2f 31 2e 30 20 28 20 68 74 74 70 3a 2f 2f 77 77 77 2e 67 6f 6f 67 6c 65 62 6f 74 2e 63 6f 6d 2f 62 6f 74 2e 68 74 6d 6c 29 0d 0a 41 63 63 65 70 74 3a 20 2a 2f 2a 0d 0a 43 6f 6f 6b 69 65 3a 20 75 73 65 72 6e 61 6d 65 3d 61 64 6d 69 6e 3b 20 61 75 74 68 65 6e 74 69 63 61 74 65 64 3d 31 3b 20 75 73 65 72 74 79 70 65 3d 61 64 6d 69 6e 3b 0d 0a 43 6f 6e 6e 65 63 74 69 6f 6e 3a 20 6b 65 65 70 2d 61 6c 69 76 65 0d 0a 43 6f 6e 74 65 6e 74 2d 4c 65 6e 67 74 68 3a 20 30 0d 0a 0d 0a",
                 "47 45 54 20 2f 6c 6f 67 69 6e 2e 70 68 70 20 48 54 54 50 2f 31 2e 31 0d 0a 48 6f 73 74 3a 20 54 64 74 63 67 61 4c 78 6b 75 55 4a 66 4a 73 61 65 7a 4f 7a 5a 76 62 63 4b 54 73 0d 0a 55 73 65 72 2d 41 67 65 6e 74 3a 20 4f 70 65 72 61 2f 39 2e 38 30 20 28 57 69 6e 64 6f 77 73 20 4e 54 20 36 2e 31 3b 20 57 4f 57 36 34 3b 20 55 3b 20 70 74 29 20 50 72 65 73 74 6f 2f 32 2e 31 30 2e 32 32 39 20 56 65 72 73 69 6f 6e 2f 31 31 2e 36 32 0d 0a 41 63 63 65 70 74 3a 20 2a 2f 2a 0d 0a 43 6f 6f 6b 69 65 3a 20 75 73 65 72 6e 61 6d 65 3d 61 64 6d 69 6e 3b 20 61 75 74 68 65 6e 74 69 63 61 74 65 64 3d 31 3b 20 75 73 65 72 74 79 70 65 3d 61 64 6d 69 6e 3b 0d 0a 43 6f 6e 6e 65 63 74 69 6f 6e 3a 20 6b 65 65 70 2d 61 6c 69 76 65 0d 0a 43 6f 6e 74 65 6e 74 2d 4c 65 6e 67 74 68 3a 20 30 0d 0a 0d 0a",]


# branches_list = ["this is para one. I am cat. I am 10 years old. I like fish",
#                   "this is para two. I am dog. my age is 12. I can swim",
#                      "this is para three. I am cat. I am 9 years. I like rat",
#                      "this is para four. I am rat. my age is secret. I hate cat",
#                      "this is para five. I am dog. I am 10 years old. I like fish"]

branches_combinations = set()

# 用空格作为 最小单元（树叶） 和 最小单元（树叶） 之间的分隔符
delimiter = " "


# 构造一棵 【后缀树】 的数据结构
# branche 分支（就是一条树枝，这条树枝被分隔符切成了很多个节点）
# node 节点
def get_combinations(branche1, branche2, first=0, last=1, suffix=""):
    node_list = branche1.split(delimiter)
    if last > len(node_list):
        return
    check_list = node_list[first:last]
    node = delimiter.join(str(x) for x in check_list)
    if node in branche2:
        suffix = node
        get_combinations(branche1, branche2, first, last + 1, suffix)
    else:
        branches_combinations.add(suffix)
        get_combinations(branche1, branche2, last, last + 1, suffix)


# 两两合并遍历
def recursive(branches_list):
    for n, line in enumerate(branches_list):
        if n + 1 < len(branches_list):
            branche1 = branches_list[n]
            branche2 = branches_list[n + 1]
            get_combinations(branche1, branche2)
    print(branches_combinations)

